.globl	constructor_IMyContract
.type	constructor_IMyContract, @function
RET

.globl	constructor_MyContract
.type	constructor_MyContract, @function
PUSHINT $constructor_IMyContract$
CALL 1
RET

.globl	constructor
.type	constructor, @function
DROP
NEWDICT
NEWC STDICT ENDC
POPROOT
PUSHINT $constructor_IMyContract$
CALL 1

.globl	setAllowance
.type	setAllowance, @function
LDU 256
LDU 64
DROP
PUSHINT $setAllowance_internal$
CALL 1
RET

.globl	setAllowance_internal
.type	setAllowance_internal, @function
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;; Function: setAllowance_internal
;; param: anotherContract
;; param: amount
;; fetch m_allowed
PUSHINT 0
PUSHROOT CTOS PLDDICT
PUSHINT 256
DICTUGETOPTREF
;; anotherContract
;; stack=3
PUSH s2
SWAP
OVER OVER
PUSHINT 256
DICTUGETOPTREF
;; ContractInfo.allowed
PUSHINT 0
SWAP
;; amount
;; stack=6
PUSH s4
NEWC STU 64 ENDC CTOS
ROTREV
PUSHINT 8
DICTUSET
ROTREV
PUSHINT 256
DICTUSETREF
;; assign m_allowed
PUSHINT 0
PUSHROOT CTOS PLDDICT
PUSHINT 256
DICTUSETREF
NEWC STDICT ENDC
POPROOT
BLKDROP 2

.globl	getCredit
.type	getCredit, @function
DROP
PUSHINT $getCredit_internal$
CALL 1
RET

.globl	getCredit_internal
.type	getCredit_internal, @function
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;; Function: getCredit_internal
;; get member sender
PUSHINT $get_msg_sender$
CALL 1
;; IMyContractCallback
;; stack=1
;; IMyContractCallback.getCreditCallback
NEWC
PUSHINT 0
STUR 8
PUSHINT $getCreditCallback$
STUR 32
;; balance
;; get member allowed
;; ContractInfo.allowed
PUSHINT 0
;; get member sender
PUSHINT $get_msg_sender$
CALL 1
;; m_allowed
;; stack=4
PUSHINT 0
PUSHROOT CTOS PLDDICT
PUSHINT 256
DICTUGETOPTREF
;; index
PUSHINT 256
DICTUGETOPTREF
PUSHINT 8
DICTUGET
PUSHCONT { LDU 64 ENDS }
PUSHCONT { PUSHINT 0 }
IFELSE
STUR 64
ENDC CTOS
PUSHINT $send_int_msg_2$
CALL 1
;; return
RET

.globl	getCreditCallback
.type	getCreditCallback, @function
RET

